<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ShopperMaui.ViewModels"
             xmlns:controls="clr-namespace:ShopperMaui.Controls"
             x:Class="ShopperMaui.Views.ManageDataPage"
             x:Name="ManageDataPageRoot"
             x:DataType="vm:ManageDataViewModel"
             Title="ZarzÄ…dzanie danymi">

    <Grid RowDefinitions="Auto,*">
        <!-- Tab Selector -->
        <Border Grid.Row="0" 
                Margin="16,16,16,0"
                Padding="4"
                StrokeShape="RoundRectangle 12"
                BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray800}}">
            <Grid ColumnDefinitions="*,*" ColumnSpacing="4">
                <Button Text="ðŸ“ Kategorie"
                        Command="{Binding Source={x:Reference ManageDataPageRoot}, Path=SelectCategoriesTabCommand}"
                        Style="{StaticResource TabButton}"
                        BackgroundColor="{Binding SelectedTabIndex, Converter={StaticResource TabBackgroundConverter}, ConverterParameter=0}" />
                <Button Grid.Column="1"
                        Text="ðŸª Sklepy"
                        Command="{Binding Source={x:Reference ManageDataPageRoot}, Path=SelectStoresTabCommand}"
                        Style="{StaticResource TabButton}"
                        BackgroundColor="{Binding SelectedTabIndex, Converter={StaticResource TabBackgroundConverter}, ConverterParameter=1}" />
            </Grid>
        </Border>

        <!-- Categories Tab Content -->
        <controls:EditableItemListControl Grid.Row="1"
                                          Padding="16"
                                          IsVisible="{Binding SelectedTabIndex, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=0}"
                                          ItemsSource="{Binding CategoryItems}"
                                          AddCommand="{Binding AddCategoryCommand}"
                                          AddButtonText="+ Dodaj kategoriÄ™"
                                          ItemPlaceholder="Nazwa kategorii"
                                          ShowSubtitle="True"
                                          EmptyStateIcon="ðŸ“"
                                          EmptyStateTitle="Brak kategorii"
                                          EmptyStateDescription="Dodaj pierwszÄ… kategoriÄ™, aby zaczÄ…Ä‡ budowaÄ‡ listÄ™ zakupÃ³w." />

        <!-- Stores Tab Content -->
        <controls:EditableItemListControl Grid.Row="1"
                                          Padding="16"
                                          IsVisible="{Binding SelectedTabIndex, Converter={StaticResource TabVisibilityConverter}, ConverterParameter=1}"
                                          ItemsSource="{Binding StoreItems}"
                                          AddCommand="{Binding AddStoreCommand}"
                                          AddButtonText="+ Dodaj sklep"
                                          ItemPlaceholder="Nazwa sklepu"
                                          ShowSubtitle="False"
                                          EmptyStateIcon="ðŸª"
                                          EmptyStateTitle="Brak sklepÃ³w"
                                          EmptyStateDescription="Dodaj pierwszy sklep, aby szybciej porzÄ…dkowaÄ‡ produkty." />
    </Grid>
</ContentPage>
