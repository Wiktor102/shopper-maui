<?xml version="1.0" encoding="utf-8"?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:ShopperMaui.Models"
             x:Class="ShopperMaui.Controls.RecipeItemControl"
             x:Name="Root"
             x:DataType="models:Recipe">
    <Border x:Name="CardBorder"
            Style="{StaticResource CardBorder}"
            Margin="0">
        <Border.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding OpenDetailsCommand, Source={x:Reference Root}}"
                                  CommandParameter="{Binding .}"/>
        </Border.GestureRecognizers>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
                <VisualState x:Name="Normal">
                    <VisualState.Setters>
                        <Setter Property="Scale"
                                Value="1"/>
                        <Setter Property="Opacity"
                                Value="1"/>
                    </VisualState.Setters>
                </VisualState>

                <VisualState x:Name="PointerOver">
                    <VisualState.Setters>
                        <Setter Property="Scale"
                                Value="1.02"/>
                        <Setter Property="Opacity"
                                Value="0.98"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <Grid RowDefinitions="Auto,Auto,Auto"
                ColumnDefinitions="*,Auto"
                ColumnSpacing="8"
                RowSpacing="8">
            <Label Grid.Row="0"
                    Grid.Column="0"
                   Text="{Binding Name}"
                   FontSize="18"
                   FontAttributes="Bold"
                   LineBreakMode="TailTruncation"/>

            <Button Grid.Row="0"
                    Grid.Column="1"
                    Grid.RowSpan="2"
                    Text="+"
                    Command="{Binding AddCommand, Source={x:Reference Root}}"
                    CommandParameter="{Binding .}"/>

            <Label Grid.Row="1"
                    Grid.Column="0"
                    Grid.ColumnSpan="1"
                   Text="{Binding Description}"
                   TextColor="{StaticResource TextMuted}"
                   LineBreakMode="WordWrap"
                   MaxLines="3"/>
        </Grid>
    </Border>
</ContentView>
